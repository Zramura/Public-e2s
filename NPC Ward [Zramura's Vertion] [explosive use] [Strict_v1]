@name NPC Ward [Zramura's Vertion] [explosive use] [Strict_v1]
@persist Target_Array:array
@trigger none
@strict
#ifdef dupefinished()
if (duped()) { exit() }
#endif
const Filter = array("npc_grenade_bugbait","npc_zombie_grenade","npc_grenade_frag","npc_satchel","npc_tripmine","npc_heli_avoidsphere","npc_template_maker","npcz_aw119_kiowa")
foreach(_:number,Exclude:string=Filter){
    findExcludeClass(Exclude)
}
findIncludeClass("npc_*")
Target_Array = array(),Explosive = "models/props_phx/misc/potato_launcher_explosive.mdl"
timer("Logic",1,0,function(){
    if(findCanQuery()){
        findInSphere(entity():pos(),1000) # range is set here
        Target_Array = findToArray()
    }
    if(Target_Array:count()>0){
        foreach(_:number,Target_Entity:entity=Target_Array){
            if(Target_Entity&Target_Entity:health()>0&propCanCreate()){
                const Target_Pos = Target_Entity:toWorld(vec(0,0,Target_Entity:height()*0.5))
                propSpawn(Explosive,Target_Pos,ang(),1):propBreak()
            }
        }
    }
})
